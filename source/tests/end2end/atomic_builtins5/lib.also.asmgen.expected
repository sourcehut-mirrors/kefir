.att_syntax
.section .note.GNU-stack,"",%progbits

.global test_fetch_add_short
.type test_fetch_add_short, @function
.global test_fetch_and_short
.type test_fetch_and_short, @function
.global test_fetch_sub_short
.type test_fetch_sub_short, @function
.global test_fetch_xor_short
.type test_fetch_xor_short, @function
.global test_fetch_or_int
.type test_fetch_or_int, @function
.global test_fetch_add_char
.type test_fetch_add_char, @function
.global test_fetch_add_long
.type test_fetch_add_long, @function
.global test_fetch_and_char
.type test_fetch_and_char, @function
.global test_fetch_and_long
.type test_fetch_and_long, @function
.global test_fetch_or_short
.type test_fetch_or_short, @function
.global test_fetch_sub_char
.type test_fetch_sub_char, @function
.global test_fetch_sub_long
.type test_fetch_sub_long, @function
.global test_fetch_xor_char
.type test_fetch_xor_char, @function
.global test_fetch_xor_long
.type test_fetch_xor_long, @function
.global test_fetch_add_int
.type test_fetch_add_int, @function
.global test_fetch_and_int
.type test_fetch_and_int, @function
.global test_fetch_or_char
.type test_fetch_or_char, @function
.global test_fetch_or_long
.type test_fetch_or_long, @function
.global test_fetch_sub_int
.type test_fetch_sub_int, @function
.global test_fetch_xor_int
.type test_fetch_xor_int, @function

.section .text
__kefir_text_section_begin:
test_fetch_add_short:
__kefir_text_func_test_fetch_add_short_begin:
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddw %ax, (%rdx)
    ret
__kefir_text_func_test_fetch_add_short_end:

test_fetch_and_short:
__kefir_text_func_test_fetch_and_short_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movw (%rdi), %ax
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_and_short_label1:
    movsxw -2(%rbp), %rcx
    movsx %si, %rax
    and %eax, %ecx
    mov %rdi, %rdx
    movw -2(%rbp), %ax
    lock     cmpxchgw %cx, (%rdx)
    je _kefir_func_test_fetch_and_short_label3
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_and_short_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_and_short_label1
_kefir_func_test_fetch_and_short_label2:
    movw -2(%rbp), %ax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_and_short_end:

test_fetch_sub_short:
__kefir_text_func_test_fetch_sub_short_begin:
    movsx %si, %rax
    neg %eax
    mov %rdi, %rdx
    lock     xaddw %ax, (%rdx)
    ret
__kefir_text_func_test_fetch_sub_short_end:

test_fetch_xor_short:
__kefir_text_func_test_fetch_xor_short_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movw (%rdi), %ax
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_xor_short_label1:
    movsxw -2(%rbp), %rcx
    movsx %si, %rax
    xor %eax, %ecx
    mov %rdi, %rdx
    movw -2(%rbp), %ax
    lock     cmpxchgw %cx, (%rdx)
    je _kefir_func_test_fetch_xor_short_label3
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_xor_short_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_xor_short_label1
_kefir_func_test_fetch_xor_short_label2:
    movw -2(%rbp), %ax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_xor_short_end:

test_fetch_or_int:
__kefir_text_func_test_fetch_or_int_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movl (%rdi), %eax
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_or_int_label1:
    movl -4(%rbp), %ecx
    or %esi, %ecx
    mov %rdi, %rdx
    movl -4(%rbp), %eax
    lock     cmpxchgl %ecx, (%rdx)
    je _kefir_func_test_fetch_or_int_label3
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_or_int_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_or_int_label1
_kefir_func_test_fetch_or_int_label2:
    movl -4(%rbp), %eax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_or_int_end:

test_fetch_add_char:
__kefir_text_func_test_fetch_add_char_begin:
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddb %al, (%rdx)
    ret
__kefir_text_func_test_fetch_add_char_end:

test_fetch_add_long:
__kefir_text_func_test_fetch_add_long_begin:
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddq %rax, (%rdx)
    ret
__kefir_text_func_test_fetch_add_long_end:

test_fetch_and_char:
__kefir_text_func_test_fetch_and_char_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movb (%rdi), %al
    movb %al, -1(%rbp)
_kefir_func_test_fetch_and_char_label1:
    movsxb -1(%rbp), %rcx
    movsx %sil, %rax
    and %eax, %ecx
    mov %rdi, %rdx
    movb -1(%rbp), %al
    lock     cmpxchgb %cl, (%rdx)
    je _kefir_func_test_fetch_and_char_label3
    movb %al, -1(%rbp)
_kefir_func_test_fetch_and_char_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_and_char_label1
_kefir_func_test_fetch_and_char_label2:
    movb -1(%rbp), %al
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_and_char_end:

test_fetch_and_long:
__kefir_text_func_test_fetch_and_long_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movq (%rdi), %rax
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_and_long_label1:
    movq -8(%rbp), %rcx
    and %rsi, %rcx
    mov %rdi, %rdx
    movq -8(%rbp), %rax
    lock     cmpxchgq %rcx, (%rdx)
    je _kefir_func_test_fetch_and_long_label3
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_and_long_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_and_long_label1
_kefir_func_test_fetch_and_long_label2:
    movq -8(%rbp), %rax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_and_long_end:

test_fetch_or_short:
__kefir_text_func_test_fetch_or_short_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movw (%rdi), %ax
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_or_short_label1:
    movsxw -2(%rbp), %rcx
    movsx %si, %rax
    or %eax, %ecx
    mov %rdi, %rdx
    movw -2(%rbp), %ax
    lock     cmpxchgw %cx, (%rdx)
    je _kefir_func_test_fetch_or_short_label3
    movw %ax, -2(%rbp)
_kefir_func_test_fetch_or_short_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_or_short_label1
_kefir_func_test_fetch_or_short_label2:
    movw -2(%rbp), %ax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_or_short_end:

test_fetch_sub_char:
__kefir_text_func_test_fetch_sub_char_begin:
    movsx %sil, %rax
    neg %eax
    mov %rdi, %rdx
    lock     xaddb %al, (%rdx)
    ret
__kefir_text_func_test_fetch_sub_char_end:

test_fetch_sub_long:
__kefir_text_func_test_fetch_sub_long_begin:
    neg %rsi
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddq %rax, (%rdx)
    ret
__kefir_text_func_test_fetch_sub_long_end:

test_fetch_xor_char:
__kefir_text_func_test_fetch_xor_char_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movb (%rdi), %al
    movb %al, -1(%rbp)
_kefir_func_test_fetch_xor_char_label1:
    movsxb -1(%rbp), %rcx
    movsx %sil, %rax
    xor %eax, %ecx
    mov %rdi, %rdx
    movb -1(%rbp), %al
    lock     cmpxchgb %cl, (%rdx)
    je _kefir_func_test_fetch_xor_char_label3
    movb %al, -1(%rbp)
_kefir_func_test_fetch_xor_char_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_xor_char_label1
_kefir_func_test_fetch_xor_char_label2:
    movb -1(%rbp), %al
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_xor_char_end:

test_fetch_xor_long:
__kefir_text_func_test_fetch_xor_long_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movq (%rdi), %rax
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_xor_long_label1:
    movq -8(%rbp), %rcx
    xor %rsi, %rcx
    mov %rdi, %rdx
    movq -8(%rbp), %rax
    lock     cmpxchgq %rcx, (%rdx)
    je _kefir_func_test_fetch_xor_long_label3
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_xor_long_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_xor_long_label1
_kefir_func_test_fetch_xor_long_label2:
    movq -8(%rbp), %rax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_xor_long_end:

test_fetch_add_int:
__kefir_text_func_test_fetch_add_int_begin:
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddl %eax, (%rdx)
    ret
__kefir_text_func_test_fetch_add_int_end:

test_fetch_and_int:
__kefir_text_func_test_fetch_and_int_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movl (%rdi), %eax
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_and_int_label1:
    movl -4(%rbp), %ecx
    and %esi, %ecx
    mov %rdi, %rdx
    movl -4(%rbp), %eax
    lock     cmpxchgl %ecx, (%rdx)
    je _kefir_func_test_fetch_and_int_label3
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_and_int_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_and_int_label1
_kefir_func_test_fetch_and_int_label2:
    movl -4(%rbp), %eax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_and_int_end:

test_fetch_or_char:
__kefir_text_func_test_fetch_or_char_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movb (%rdi), %al
    movb %al, -1(%rbp)
_kefir_func_test_fetch_or_char_label1:
    movsxb -1(%rbp), %rcx
    movsx %sil, %rax
    or %eax, %ecx
    mov %rdi, %rdx
    movb -1(%rbp), %al
    lock     cmpxchgb %cl, (%rdx)
    je _kefir_func_test_fetch_or_char_label3
    movb %al, -1(%rbp)
_kefir_func_test_fetch_or_char_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_or_char_label1
_kefir_func_test_fetch_or_char_label2:
    movb -1(%rbp), %al
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_or_char_end:

test_fetch_or_long:
__kefir_text_func_test_fetch_or_long_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movq (%rdi), %rax
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_or_long_label1:
    movq -8(%rbp), %rcx
    or %rsi, %rcx
    mov %rdi, %rdx
    movq -8(%rbp), %rax
    lock     cmpxchgq %rcx, (%rdx)
    je _kefir_func_test_fetch_or_long_label3
    movq %rax, -8(%rbp)
_kefir_func_test_fetch_or_long_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_or_long_label1
_kefir_func_test_fetch_or_long_label2:
    movq -8(%rbp), %rax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_or_long_end:

test_fetch_sub_int:
__kefir_text_func_test_fetch_sub_int_begin:
    neg %esi
    mov %rdi, %rdx
    mov %rsi, %rax
    lock     xaddl %eax, (%rdx)
    ret
__kefir_text_func_test_fetch_sub_int_end:

test_fetch_xor_int:
__kefir_text_func_test_fetch_xor_int_begin:
    push %rbp
    mov %rsp, %rbp
    sub $16, %rsp
    movl (%rdi), %eax
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_xor_int_label1:
    movl -4(%rbp), %ecx
    xor %esi, %ecx
    mov %rdi, %rdx
    movl -4(%rbp), %eax
    lock     cmpxchgl %ecx, (%rdx)
    je _kefir_func_test_fetch_xor_int_label3
    movl %eax, -4(%rbp)
_kefir_func_test_fetch_xor_int_label3:
    sete %al
    xor %ecx, %ecx
    test %al, %al
    sete %cl
    test %ecx, %ecx
    jnz _kefir_func_test_fetch_xor_int_label1
_kefir_func_test_fetch_xor_int_label2:
    movl -4(%rbp), %eax
    lea (%rbp), %rsp
    pop %rbp
    ret
__kefir_text_func_test_fetch_xor_int_end:

__kefir_text_section_end:

